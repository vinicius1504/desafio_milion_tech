import { AppDataSource } from './database';
import { Customer } from '../entities/Customer';

const initialCustomers = [
  {
    name: 'Jo√£o Silva',
    email: 'joao.silva@email.com',
    phone: '(11) 98765-4321',
    address: 'Rua das Flores, 123 - S√£o Paulo, SP',
  },
  {
    name: 'Maria Santos',
    email: 'maria.santos@email.com',
    phone: '(21) 99876-5432',
    address: 'Av. Paulista, 1000 - S√£o Paulo, SP',
  },
  {
    name: 'Pedro Oliveira',
    email: 'pedro.oliveira@email.com',
    phone: '(11) 97654-3210',
    address: 'Rua Augusta, 500 - S√£o Paulo, SP',
  },
  {
    name: 'Ana Costa',
    email: 'ana.costa@email.com',
    phone: '(21) 96543-2109',
    address: 'Av. Atl√¢ntica, 2000 - Rio de Janeiro, RJ',
  },
  {
    name: 'Carlos Ferreira',
    email: 'carlos.ferreira@email.com',
    phone: '(11) 95432-1098',
    address: 'Rua Oscar Freire, 800 - S√£o Paulo, SP',
  },
];

export async function seedDatabase(): Promise<void> {
  try {
    const customerRepository = AppDataSource.getRepository(Customer);

    // Verificar se j√° existem clientes no banco
    const count = await customerRepository.count();

    if (count > 0) {
      console.log('‚úÖ Database already has customers, skipping seed');
      return;
    }

    console.log('üå± Seeding database with initial customers...');

    // Criar clientes iniciais
    for (const customerData of initialCustomers) {
      const customer = customerRepository.create(customerData);
      await customerRepository.save(customer);
      console.log(`  ‚úì Created customer: ${customerData.name}`);
    }

    console.log(`‚úÖ Database seeded successfully with ${initialCustomers.length} customers`);
  } catch (error) {
    console.error('‚ùå Error seeding database:', error);
    throw error;
  }
}
